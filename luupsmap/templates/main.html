{% extends 'index.html' %}

{% block header_controls %}
  <div class="media flt--right" onclick="showModal(true)">
    <a class="cta">
      <svg viewBox="0 0 24 24">
        <use xlink:href="{{ url_for('static', filename='svg/icons/all.svg') }}#search"></use>
      </svg>
    </a>
  </div>
{% endblock %}

{% block content %}
  <div id="overlay" class="overlay">
    <div id="modal" class="modal">
      <a class="close flt--right" onclick="showModal(false)">&times;</a>
      <header class="header">
      </header>
      <div class="content">
        <form action="" method="post">
          <input type="checkbox" name="food">
          <input type="checkbox" name="drinks">
          <input type="checkbox" name="entertainment">
          <input type="submit" value="Submit">
        </form>
      </div>
    </div>
  </div>
  <section id="map" class="map">
    <div id="content"></div>
  </section>
  <!-- GOOGLE MAPS -->
  <script src="https://maps.googleapis.com/maps/api/js?key={{ config.GMAPS_API_KEY }}"></script>
  <script>
    initMap();
    {% for venue in venues %}
      {% for location in venue.locations %}
        {# TODO: Proper JSON serisalization #}
        venue_dict = {
          id: '{{ venue.id  }}',
          name: '{{ venue.name | escape }}',
          homepage: '{{ venue.homepage }}',
          type: '{{ venue.type}}',
          href: '{{ url_for('show_details', venue_id=venue.id) }}'
        };
        addMarker(venue_dict, {
          lat: {{ location.latitude }},
          lng: {{ location.longitude }}
        });
      {% endfor %}
    {% endfor %}
  </script>
{% endblock %}
